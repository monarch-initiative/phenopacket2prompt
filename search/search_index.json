{"config":{"lang":["en"],"separator":"[\\s\\-]+","pipeline":["stopWordFilter"]},"docs":[{"location":"","title":"Phenopacket2Prompt","text":"<p>phenopacket2prompt is a Java application that creates prompts for Large Language Models (LLMs) on the basis of clinical data that has been encoded using  the Global Alliance for Genomics and Health (GA4GH) Phenopacket Schema.</p> <p>Optionally, the prompts can be generated in Czech, Dutch German, Italian, and Spanish.</p>"},{"location":"#running-phenopacket2prompt","title":"Running phenopacket2prompt","text":"<p>There are currently two use cases:  1. The creation of prompts (in several languages!), starting from phenopackets, intended for use with a Large Language Model (LLM) which is asked for a differential diagnosis. 2. The creation of phenopackets from case reports via text mining using the fenominal 3. library.</p>"},{"location":"#running-with-phenopackets","title":"Running with Phenopackets","text":"<p>For this use case, follow the instructions in Set-up and Batch.</p>"},{"location":"#running-with-case-reports","title":"Running with case reports","text":"<p>Assuming the hp.json file has been downloaded as described in Set-up and all the case report text files are available in a directory at <code>some/path/gptdocs</code>, run</p> running the app<pre><code>java -jar target/phenopacket2prompt.jar gpt -g some/path/gptdocs\n</code></pre> <p>This command will create a new directory called <code>gptOut</code> (this can be adjusted using the -o option). It will contain four subdirectories</p> <ol> <li>phenopackets. GA4GH phenopackets derived from each case report</li> <li>phenopacket_based_queries. Feature-based query prompts for GPT-4 based on the information in the phenopackets</li> <li>txt_without_discussion. Original query based on the original case report with text as presented by the first discussant up to but not including text contributed by the second discussant or any following text</li> <li>txt_with_differential. Text that starts with the presentation by the first discussant up to and including the differential. This was used to check parsing but was not used in our analysis.</li> </ol>"},{"location":"#feedback","title":"Feedback","text":"<p>The best place to leave feedback, ask questions, and report bugs is the  phenopacket2prompt Issue Tracker.</p>"},{"location":"batch/","title":"batch","text":"<p>This command creates prompts from all phenopackets in the input directory.</p>"},{"location":"batch/#getting-the-input-data","title":"Getting the input data","text":"<p>Go to the Releases section of  phenopacket-store, and download the latest release (currently 0.1.5 on April 29, 2024, but evolving rapidly). Currently, this resource contains over 4300 phenopackets.</p> <p>Download one of the archives (e.g., <code>all_phenopackets.zip</code>) and unpack in a location of your choice.</p> <p>Then run the following command.</p> <p>batch<pre><code>java -jar phenopacket2prompt.jar batch  -d &lt;all_phenopackets&gt;\n</code></pre> where <code>&lt;all_phenopackets&gt;</code> is the complete relative or absolute path to the unpacked directory. </p> <p>phenopacket2prompt will create a new subdirectory called <code>prompts</code>in the current directory. It will contain one folder for each language (currently, English-en and Spanish-es), as well as a file called <code>correct_results.tsv</code> with the following structure</p> Disease name OMIM identifier Prompt file name Birt-Hogg-Dube syndrome 2 OMIM:620459 PMID_36440963_IIIPMID_36440963_III-33-prompt.txt Immunodeficiency 115 with autoinflammation OMIM:620632 PMID_26008899_patient-prompt.txt Jacobsen syndrome OMIM:147791 PMID_15266616_148-prompt.txt <p>Note that the prompt file name is the same for every language.</p>"},{"location":"english/","title":"English","text":"<p>Todo -- let's write a summary of the translations in each language.</p>"},{"location":"languages/","title":"Languages","text":"<p>phenopacket2prompt creates prompts for Large Lanugage Models starting from HPO terms and other data contained in a GA4GH phenopacket. </p> <p>Additionally, the HPO translation files (See Gargano et al., 2024) are leveraged to create prompts in several languages other than English.</p>"},{"location":"languages/#the-template","title":"The template","text":"<p>Phenopackets are generated according to the same scheme (template) in all languages. The following example explains the template in English.</p> <p>The template contains a series of components that can be translated in isolation.</p>"},{"location":"languages/#header","title":"Header","text":"<p>This is the explanation for the start of the prompt for GPT.</p> <p>  I am running an experiment on a clinicopathological case conference to see how your diagnoses  compare with those of human experts. I am going to give you part of a medical case. ... After you read the case,  I want you to give two pieces of information. The first piece of information is your most likely  diagnosis/diagnoses. You need to be as specific as possible -- the goal is to get the correct  answer, not a broad category of answers. Do you have any questions, Dr. GPT-4?</p>"},{"location":"languages/#describe-the-individual","title":"Describe the individual","text":"<p>In this section, we present the age and sex of the proband (patient or individual) and the symptoms with which they presented. Each individual can have an age of onset and an age at last examination. Therefore, we have this</p> <ol> <li> <p>Age of onset and age at last examination available The proband was a 39-year old woman who presented at the age of 12 years with HPO1, HPO2, and HPO3. HPO4 and HPO5 were excluded.</p> </li> <li> <p>Age at last examination available but age of onset not available The proband was a 39-year old woman who presented with HPO1, HPO2, and HPO3. HPO4 and HPO5 were excluded.</p> </li> <li> <p>Age at last examination not available but age of onset available The proband  presented  at the age of 12 years with HPO1, HPO2, and HPO3. HPO4 and HPO5 were excluded.</p> </li> <li> <p>No age information available The proband  presented  with HPO1, HPO2, and HPO3. HPO4 and HPO5 were excluded.</p> </li> </ol>"},{"location":"languages/#describe-findings-at-other-specified-ages","title":"Describe findings at other specified ages","text":"<p>Some of the phenopackets have multiple ages at which specific features were first observed. Each of these is written as follows.</p> <p>At the age of 42 years, he/she/the individual presented with HPO1, HPO2, and HPO3, and HPO4 and HPO5 were excluded.</p>"},{"location":"setup/","title":"Set-up","text":"<p>phenopacket2prompt requires at least Java 17. To build it from scratch, Apache Maven is also required.</p>"},{"location":"setup/#installation","title":"Installation","text":"<p>Most users should download the prebuilt executable file from the Releases page of the GutHub repository.</p> <p>It is also possible to build the application from source using standard Maven and Java tools.</p> building the app<pre><code>git clone https://github.com/monarch-initiative/phenopacket2prompt.git\ncd phenopacket2prompt\nmaven package\njava -jar target/phenopacket2prompt.jar [OPTIONS]\n</code></pre>"},{"location":"setup/#setup","title":"Setup","text":""},{"location":"setup/#downloading-necessary-input-files","title":"Downloading necessary input files","text":"<p>For more information about the HPO, see Koehler et al. (2021). To run the commands, we need to download the latest copy of the Human Phenotype Ontology hp.json file as well as the hp-international.obo file. We can do this by runing the download command to get the necessary files. Adjust the path to the <code>phenopacket2prompt.jar</code> file as necessary, the default is <code>target/phenopacket2prompt</code>.</p> download<pre><code>java -jar target/phenopacket2prompt.jar download\n</code></pre>"},{"location":"setup/#obtaining-phenopackets","title":"Obtaining phenopackets","text":"<p>This app is designed to work with the collection of GA4GH phenopackets obtained from the phenopacket-store repository. Obtain the latest release of these files from the Releases page of the repository and unpack (unzip or ungzip) the repository.</p>"}]}